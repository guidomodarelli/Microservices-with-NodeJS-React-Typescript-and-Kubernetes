## Arquitectura del Proyecto

A continuaci√≥n, se presenta una visi√≥n reestructurada y profesional de la arquitectura del proyecto, detallando la interacci√≥n entre los diferentes servicios y las tecnolog√≠as utilizadas.

---

### üõ†Ô∏è Servicios del Proyecto

El proyecto se basa en una arquitectura de **microservicios**, implementando el patr√≥n de **Base de Datos por Servicio**. Los servicios que componen la aplicaci√≥n son:

* **API Gateway**
* **Servicio de Notificaciones** (*Notification Service*)
* **Servicio de Autenticaci√≥n** (*Auth Service*)
* **Servicio de Usuarios** (*User Service*)
* **Servicio de Chat** (*Chat Service*)
* **Servicio de √ìrdenes** (*Order Service*)
* **Servicio de Rese√±as** (*Review Service*)
* **Servicio de Gigs** (*Gig Service*)

---

### üì° Comunicaci√≥n y Clientes

La interacci√≥n con el sistema se gestiona de la siguiente manera:

* **Clientes:** Pueden ser aplicaciones **m√≥viles** o **web** que acceden a los microservicios.
* **Conexi√≥n con el API Gateway:** El cliente se comunica directamente con el **API Gateway**.
    * La comunicaci√≥n es principalmente **s√≠ncrona** (solicitud-respuesta) a trav√©s de **HTTP/HTTPS**.
    * Se utiliza comunicaci√≥n **as√≠ncrona** a trav√©s de **Socket.IO** para enviar eventos en tiempo real a los clientes.
* **Comunicaci√≥n Interna (API Gateway a Microservicios):** Se realiza mediante **HTTP/HTTPS**.

---

### üåê Infraestructura Compartida

Se utilizar√° una √∫nica instancia de varias herramientas de infraestructura para toda la aplicaci√≥n. Todos los servicios se configurar√°n localmente usando **Docker** y **Docker Compose**.

#### I. Elasticsearch y Kibana (Observabilidad y B√∫squeda)

Se utilizar√° una √∫nica instancia de **Elasticsearch** y **Kibana** para proporcionar tres funciones principales:

1Ô∏è‚É£ **B√∫squeda Avanzada:**
* Se almacenar√° la **data de los "gigs"** en Elasticsearch.
* La funcionalidad de **b√∫squeda de "gigs"** por parte del usuario se realizar√° exclusivamente sobre Elasticsearch, en lugar de consultar directamente la base de datos principal (MongoDB).

2Ô∏è‚É£ **Monitoreo de Logs (Registro de Eventos):**
* Todos los **datos de registro (logs)** generados por cada microservicio, el **API Gateway** y la **aplicaci√≥n *frontend*** (aplicaci√≥n React) se enviar√°n a Elasticsearch.

3Ô∏è‚É£ **Monitoreo de Aplicaciones:**
* Se enviar√°n **datos de monitoreo de la aplicaci√≥n** (incluyendo errores del *frontend*) a Elasticsearch.

**Funci√≥n de Kibana:**
* **Elasticsearch** act√∫a como la **capa de almacenamiento** y motor de b√∫squeda.
* **Kibana** es el **panel de control (dashboard)** utilizado para visualizar, analizar y **mostrar** los datos de b√∫squeda, logs y monitoreo almacenados en Elasticsearch.

#### II. RabbitMQ (Mensajer√≠a As√≠ncrona)

* Se tendr√° **una sola instancia** de **RabbitMQ** para toda la aplicaci√≥n.
* Todos los microservicios se conectar√°n a esta √∫nica instancia para la comunicaci√≥n as√≠ncrona basada en eventos.
* El **Servicio de Notificaciones** (*Notification Service*) en particular, escuchar√° los eventos de otros servicios (como el *Auth Service*) para realizar acciones, por ejemplo, el env√≠o de correos electr√≥nicos.

#### III. Redis (Cach√© y Otros Usos)

* Se tendr√° **una sola instancia** de **Redis**.
* Los servicios que inicialmente se conectar√°n a Redis son el **Servicio de Usuarios** (*User Service*) y, potencialmente, el **API Gateway**.

---

### üíæ Bases de Datos por Servicio

Siguiendo el patr√≥n de **Base de Datos por Servicio**, cada microservicio tendr√° su propia base de datos dedicada. Aunque la data de los "gigs" tambi√©n se almacenar√° en MongoDB por motivos de demostraci√≥n, la recuperaci√≥n principal se har√° desde Elasticsearch.

| Servicio | Base de Datos | Conexi√≥n a RabbitMQ | Conexi√≥n a Redis | Comentarios |
| :--- | :--- | :--- | :--- | :--- |
| **API Gateway** | N/A | No | Potencialmente S√≠ | Conectado a Elasticsearch/Kibana para Logs. |
| **Notification Service** | N/A | **S√≠** | No | Solo escucha eventos y env√≠a correos/notificaciones. |
| **Auth Service** | **MySQL** | **S√≠** | No | Se utiliza MySQL para demostrar su configuraci√≥n. |
| **User Service** | **MongoDB** | **S√≠** | **S√≠** | Se utilizar√° para almacenar la data de usuarios. |
| **Gig Service** | **MongoDB** y **Elasticsearch** | **S√≠** | No | La data se guarda en ambos, pero la **recuperaci√≥n es solo desde Elasticsearch**. |
| **Chat Service** | **MongoDB** | **S√≠** | No | Almacena los datos de chat. |
| **Order Service** | **MongoDB** | **S√≠** | No | Almacena los datos de √≥rdenes. |
| **Review Service** | **PostgreSQL** | **S√≠** | No | Almacena rese√±as y calificaciones. |